{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/UserContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.UserProvider = UserProvider;\n  exports.useUser = useUser;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const UserContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function UserProvider({\n    children\n  }) {\n    _s();\n    const [userId, setUserId] = (0, _react.useState)(null);\n    const [isPremium, setIsPremium] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [hasCompletedOnboarding, setHasCompletedOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      initializeUser();\n    }, []);\n    const initializeUser = async () => {\n      try {\n        const storedUserId = await AsyncStorage.default.getItem('userId');\n        const onboardingComplete = await AsyncStorage.default.getItem('onboardingComplete');\n        if (storedUserId) {\n          setUserId(storedUserId);\n          setHasCompletedOnboarding(onboardingComplete === 'true');\n          await refreshUser(storedUserId);\n        } else {\n          await createUser();\n        }\n      } catch (error) {\n        console.error('Failed to initialize user:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const createUser = async () => {\n      try {\n        const response = await fetch(`${API_URL}/api/users`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const data = await response.json();\n        await AsyncStorage.default.setItem('userId', data.userId);\n        setUserId(data.userId);\n        setIsPremium(data.isPremium);\n      } catch (error) {\n        console.error('Failed to create user:', error);\n      }\n    };\n    const refreshUser = async id => {\n      const targetId = id || userId;\n      if (!targetId) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${targetId}`);\n        const data = await response.json();\n        setIsPremium(data.isPremium || false);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    const completeOnboarding = async () => {\n      await AsyncStorage.default.setItem('onboardingComplete', 'true');\n      setHasCompletedOnboarding(true);\n    };\n    const setPremium = async premium => {\n      if (!userId) return;\n      try {\n        await fetch(`${API_URL}/api/users/${userId}/premium?is_premium=${premium}`, {\n          method: 'PATCH'\n        });\n        setIsPremium(premium);\n      } catch (error) {\n        console.error('Failed to update premium status:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(UserContext.Provider, {\n      value: {\n        userId,\n        isPremium,\n        isLoading,\n        hasCompletedOnboarding,\n        createUser,\n        completeOnboarding,\n        setPremium,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this);\n  }\n  _s(UserProvider, \"zZKy6mqJf3ZeUf0UEeZ2/rS656Y=\");\n  _c = UserProvider;\n  function useUser() {\n    _s2();\n    const context = (0, _react.useContext)(UserContext);\n    if (!context) {\n      throw new Error('useUser must be used within UserProvider');\n    }\n    return context;\n  }\n  _s2(useUser, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"UserProvider\");\n});","lineCount":125,"map":[[15,2,20,0,"exports"],[15,9,20,0],[15,10,20,0,"UserProvider"],[15,22,20,0],[15,25,20,0,"UserProvider"],[15,37,20,0],[16,2,114,0,"exports"],[16,9,114,0],[16,10,114,0,"useUser"],[16,17,114,0],[16,20,114,0,"useUser"],[16,27,114,0],[17,2,120,1],[17,6,120,1,"_expoVirtualEnv"],[17,21,120,1],[17,24,120,1,"require"],[17,31,120,1],[17,32,120,1,"_dependencyMap"],[17,46,120,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,2,69],[21,6,2,69,"_reactJsxDevRuntime"],[21,25,2,69],[21,28,2,69,"require"],[21,35,2,69],[21,36,2,69,"_dependencyMap"],[21,50,2,69],[22,2,5,0],[22,8,5,6,"API_URL"],[22,15,5,13],[22,18,5,13,"_expoVirtualEnv"],[22,33,5,13],[22,34,5,13,"env"],[22,37,5,13],[22,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[22,61,5,51],[23,2,18,0],[23,8,18,6,"UserContext"],[23,19,18,17],[23,35,18,20],[23,39,18,20,"createContext"],[23,45,18,33],[23,46,18,33,"createContext"],[23,59,18,33],[23,61,18,63,"undefined"],[23,70,18,72],[23,71,18,73],[24,2,20,7],[24,11,20,16,"UserProvider"],[24,23,20,28,"UserProvider"],[24,24,20,29],[25,4,20,31,"children"],[26,2,20,71],[26,3,20,72],[26,5,20,74],[27,4,20,74,"_s"],[27,6,20,74],[28,4,21,2],[28,10,21,8],[28,11,21,9,"userId"],[28,17,21,15],[28,19,21,17,"setUserId"],[28,28,21,26],[28,29,21,27],[28,32,21,30],[28,36,21,30,"useState"],[28,42,21,38],[28,43,21,38,"useState"],[28,51,21,38],[28,53,21,54],[28,57,21,58],[28,58,21,59],[29,4,22,2],[29,10,22,8],[29,11,22,9,"isPremium"],[29,20,22,18],[29,22,22,20,"setIsPremium"],[29,34,22,32],[29,35,22,33],[29,38,22,36],[29,42,22,36,"useState"],[29,48,22,44],[29,49,22,44,"useState"],[29,57,22,44],[29,59,22,45],[29,64,22,50],[29,65,22,51],[30,4,23,2],[30,10,23,8],[30,11,23,9,"isLoading"],[30,20,23,18],[30,22,23,20,"setIsLoading"],[30,34,23,32],[30,35,23,33],[30,38,23,36],[30,42,23,36,"useState"],[30,48,23,44],[30,49,23,44,"useState"],[30,57,23,44],[30,59,23,45],[30,63,23,49],[30,64,23,50],[31,4,24,2],[31,10,24,8],[31,11,24,9,"hasCompletedOnboarding"],[31,33,24,31],[31,35,24,33,"setHasCompletedOnboarding"],[31,60,24,58],[31,61,24,59],[31,64,24,62],[31,68,24,62,"useState"],[31,74,24,70],[31,75,24,70,"useState"],[31,83,24,70],[31,85,24,71],[31,90,24,76],[31,91,24,77],[32,4,26,2],[32,8,26,2,"useEffect"],[32,14,26,11],[32,15,26,11,"useEffect"],[32,24,26,11],[32,26,26,12],[32,32,26,18],[33,6,27,4,"initializeUser"],[33,20,27,18],[33,21,27,19],[33,22,27,20],[34,4,28,2],[34,5,28,3],[34,7,28,5],[34,9,28,7],[34,10,28,8],[35,4,30,2],[35,10,30,8,"initializeUser"],[35,24,30,22],[35,27,30,25],[35,33,30,25,"initializeUser"],[35,34,30,25],[35,39,30,37],[36,6,31,4],[36,10,31,8],[37,8,32,6],[37,14,32,12,"storedUserId"],[37,26,32,24],[37,29,32,27],[37,35,32,33,"AsyncStorage"],[37,47,32,45],[37,48,32,45,"default"],[37,55,32,45],[37,56,32,46,"getItem"],[37,63,32,53],[37,64,32,54],[37,72,32,62],[37,73,32,63],[38,8,33,6],[38,14,33,12,"onboardingComplete"],[38,32,33,30],[38,35,33,33],[38,41,33,39,"AsyncStorage"],[38,53,33,51],[38,54,33,51,"default"],[38,61,33,51],[38,62,33,52,"getItem"],[38,69,33,59],[38,70,33,60],[38,90,33,80],[38,91,33,81],[39,8,35,6],[39,12,35,10,"storedUserId"],[39,24,35,22],[39,26,35,24],[40,10,36,8,"setUserId"],[40,19,36,17],[40,20,36,18,"storedUserId"],[40,32,36,30],[40,33,36,31],[41,10,37,8,"setHasCompletedOnboarding"],[41,35,37,33],[41,36,37,34,"onboardingComplete"],[41,54,37,52],[41,59,37,57],[41,65,37,63],[41,66,37,64],[42,10,38,8],[42,16,38,14,"refreshUser"],[42,27,38,25],[42,28,38,26,"storedUserId"],[42,40,38,38],[42,41,38,39],[43,8,39,6],[43,9,39,7],[43,15,39,13],[44,10,40,8],[44,16,40,14,"createUser"],[44,26,40,24],[44,27,40,25],[44,28,40,26],[45,8,41,6],[46,6,42,4],[46,7,42,5],[46,8,42,6],[46,15,42,13,"error"],[46,20,42,18],[46,22,42,20],[47,8,43,6,"console"],[47,15,43,13],[47,16,43,14,"error"],[47,21,43,19],[47,22,43,20],[47,50,43,48],[47,52,43,50,"error"],[47,57,43,55],[47,58,43,56],[48,6,44,4],[48,7,44,5],[48,16,44,14],[49,8,45,6,"setIsLoading"],[49,20,45,18],[49,21,45,19],[49,26,45,24],[49,27,45,25],[50,6,46,4],[51,4,47,2],[51,5,47,3],[52,4,49,2],[52,10,49,8,"createUser"],[52,20,49,18],[52,23,49,21],[52,29,49,21,"createUser"],[52,30,49,21],[52,35,49,33],[53,6,50,4],[53,10,50,8],[54,8,51,6],[54,14,51,12,"response"],[54,22,51,20],[54,25,51,23],[54,31,51,29,"fetch"],[54,36,51,34],[54,37,51,35],[54,40,51,38,"API_URL"],[54,47,51,45],[54,59,51,57],[54,61,51,59],[55,10,52,8,"method"],[55,16,52,14],[55,18,52,16],[55,24,52,22],[56,10,53,8,"headers"],[56,17,53,15],[56,19,53,17],[57,12,53,19],[57,26,53,33],[57,28,53,35],[58,10,53,54],[59,8,54,6],[59,9,54,7],[59,10,54,8],[60,8,56,6],[60,14,56,12,"data"],[60,18,56,16],[60,21,56,19],[60,27,56,25,"response"],[60,35,56,33],[60,36,56,34,"json"],[60,40,56,38],[60,41,56,39],[60,42,56,40],[61,8,57,6],[61,14,57,12,"AsyncStorage"],[61,26,57,24],[61,27,57,24,"default"],[61,34,57,24],[61,35,57,25,"setItem"],[61,42,57,32],[61,43,57,33],[61,51,57,41],[61,53,57,43,"data"],[61,57,57,47],[61,58,57,48,"userId"],[61,64,57,54],[61,65,57,55],[62,8,58,6,"setUserId"],[62,17,58,15],[62,18,58,16,"data"],[62,22,58,20],[62,23,58,21,"userId"],[62,29,58,27],[62,30,58,28],[63,8,59,6,"setIsPremium"],[63,20,59,18],[63,21,59,19,"data"],[63,25,59,23],[63,26,59,24,"isPremium"],[63,35,59,33],[63,36,59,34],[64,6,60,4],[64,7,60,5],[64,8,60,6],[64,15,60,13,"error"],[64,20,60,18],[64,22,60,20],[65,8,61,6,"console"],[65,15,61,13],[65,16,61,14,"error"],[65,21,61,19],[65,22,61,20],[65,46,61,44],[65,48,61,46,"error"],[65,53,61,51],[65,54,61,52],[66,6,62,4],[67,4,63,2],[67,5,63,3],[68,4,65,2],[68,10,65,8,"refreshUser"],[68,21,65,19],[68,24,65,22],[68,30,65,29,"id"],[68,32,65,40],[68,36,65,45],[69,6,66,4],[69,12,66,10,"targetId"],[69,20,66,18],[69,23,66,21,"id"],[69,25,66,23],[69,29,66,27,"userId"],[69,35,66,33],[70,6,67,4],[70,10,67,8],[70,11,67,9,"targetId"],[70,19,67,17],[70,21,67,19],[71,6,69,4],[71,10,69,8],[72,8,70,6],[72,14,70,12,"response"],[72,22,70,20],[72,25,70,23],[72,31,70,29,"fetch"],[72,36,70,34],[72,37,70,35],[72,40,70,38,"API_URL"],[72,47,70,45],[72,61,70,59,"targetId"],[72,69,70,67],[72,71,70,69],[72,72,70,70],[73,8,71,6],[73,14,71,12,"data"],[73,18,71,16],[73,21,71,19],[73,27,71,25,"response"],[73,35,71,33],[73,36,71,34,"json"],[73,40,71,38],[73,41,71,39],[73,42,71,40],[74,8,72,6,"setIsPremium"],[74,20,72,18],[74,21,72,19,"data"],[74,25,72,23],[74,26,72,24,"isPremium"],[74,35,72,33],[74,39,72,37],[74,44,72,42],[74,45,72,43],[75,6,73,4],[75,7,73,5],[75,8,73,6],[75,15,73,13,"error"],[75,20,73,18],[75,22,73,20],[76,8,74,6,"console"],[76,15,74,13],[76,16,74,14,"error"],[76,21,74,19],[76,22,74,20],[76,47,74,45],[76,49,74,47,"error"],[76,54,74,52],[76,55,74,53],[77,6,75,4],[78,4,76,2],[78,5,76,3],[79,4,78,2],[79,10,78,8,"completeOnboarding"],[79,28,78,26],[79,31,78,29],[79,37,78,29,"completeOnboarding"],[79,38,78,29],[79,43,78,41],[80,6,79,4],[80,12,79,10,"AsyncStorage"],[80,24,79,22],[80,25,79,22,"default"],[80,32,79,22],[80,33,79,23,"setItem"],[80,40,79,30],[80,41,79,31],[80,61,79,51],[80,63,79,53],[80,69,79,59],[80,70,79,60],[81,6,80,4,"setHasCompletedOnboarding"],[81,31,80,29],[81,32,80,30],[81,36,80,34],[81,37,80,35],[82,4,81,2],[82,5,81,3],[83,4,83,2],[83,10,83,8,"setPremium"],[83,20,83,18],[83,23,83,21],[83,29,83,28,"premium"],[83,36,83,44],[83,40,83,49],[84,6,84,4],[84,10,84,8],[84,11,84,9,"userId"],[84,17,84,15],[84,19,84,17],[85,6,86,4],[85,10,86,8],[86,8,87,6],[86,14,87,12,"fetch"],[86,19,87,17],[86,20,87,18],[86,23,87,21,"API_URL"],[86,30,87,28],[86,44,87,42,"userId"],[86,50,87,48],[86,73,87,71,"premium"],[86,80,87,78],[86,82,87,80],[86,84,87,82],[87,10,88,8,"method"],[87,16,88,14],[87,18,88,16],[88,8,89,6],[88,9,89,7],[88,10,89,8],[89,8,90,6,"setIsPremium"],[89,20,90,18],[89,21,90,19,"premium"],[89,28,90,26],[89,29,90,27],[90,6,91,4],[90,7,91,5],[90,8,91,6],[90,15,91,13,"error"],[90,20,91,18],[90,22,91,20],[91,8,92,6,"console"],[91,15,92,13],[91,16,92,14,"error"],[91,21,92,19],[91,22,92,20],[91,56,92,54],[91,58,92,56,"error"],[91,63,92,61],[91,64,92,62],[92,6,93,4],[93,4,94,2],[93,5,94,3],[94,4,96,2],[94,24,97,4],[94,28,97,4,"_reactJsxDevRuntime"],[94,47,97,4],[94,48,97,4,"jsxDEV"],[94,54,97,4],[94,56,97,5,"UserContext"],[94,67,97,16],[94,68,97,17,"Provider"],[94,76,97,25],[95,6,98,6,"value"],[95,11,98,11],[95,13,98,13],[96,8,99,8,"userId"],[96,14,99,14],[97,8,100,8,"isPremium"],[97,17,100,17],[98,8,101,8,"isLoading"],[98,17,101,17],[99,8,102,8,"hasCompletedOnboarding"],[99,30,102,30],[100,8,103,8,"createUser"],[100,18,103,18],[101,8,104,8,"completeOnboarding"],[101,26,104,26],[102,8,105,8,"setPremium"],[102,18,105,18],[103,8,106,8,"refreshUser"],[104,6,107,6],[104,7,107,8],[105,6,107,8,"children"],[105,14,107,8],[105,16,109,7,"children"],[106,4,109,15],[107,6,109,15,"fileName"],[107,14,109,15],[107,16,109,15,"_jsxFileName"],[107,28,109,15],[108,6,109,15,"lineNumber"],[108,16,109,15],[109,6,109,15,"columnNumber"],[109,18,109,15],[110,4,109,15],[110,11,110,26],[110,12,110,27],[111,2,112,0],[112,2,112,1,"_s"],[112,4,112,1],[112,5,20,16,"UserProvider"],[112,17,20,28],[113,2,20,28,"_c"],[113,4,20,28],[113,7,20,16,"UserProvider"],[113,19,20,28],[114,2,114,7],[114,11,114,16,"useUser"],[114,18,114,23,"useUser"],[114,19,114,23],[114,21,114,26],[115,4,114,26,"_s2"],[115,7,114,26],[116,4,115,2],[116,10,115,8,"context"],[116,17,115,15],[116,20,115,18],[116,24,115,18,"useContext"],[116,30,115,28],[116,31,115,28,"useContext"],[116,41,115,28],[116,43,115,29,"UserContext"],[116,54,115,40],[116,55,115,41],[117,4,116,2],[117,8,116,6],[117,9,116,7,"context"],[117,16,116,14],[117,18,116,16],[118,6,117,4],[118,12,117,10],[118,16,117,14,"Error"],[118,21,117,19],[118,22,117,20],[118,64,117,62],[118,65,117,63],[119,4,118,2],[120,4,119,2],[120,11,119,9,"context"],[120,18,119,16],[121,2,120,0],[122,2,120,1,"_s2"],[122,5,120,1],[122,6,114,16,"useUser"],[122,13,114,23],[123,2,114,23],[123,6,114,23,"_c"],[123,8,114,23],[124,2,114,23,"$RefreshReg$"],[124,14,114,23],[124,15,114,23,"_c"],[124,17,114,23],[125,0,114,23],[125,3]],"functionMap":{"names":["<global>","UserProvider","useEffect$argument_0","initializeUser","createUser","refreshUser","completeOnboarding","setPremium","useUser"],"mappings":"AAA;OCmB;YCM;GDE;yBEE;GFiB;qBGE;GHc;sBIE;GJW;6BKE;GLG;qBME;GNW;CDkB;OQE"},"hasCjsExports":false},"type":"js/module"}]}