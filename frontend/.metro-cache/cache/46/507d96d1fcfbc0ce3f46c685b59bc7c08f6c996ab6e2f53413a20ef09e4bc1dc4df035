{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/UserContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.UserProvider = UserProvider;\n  exports.useUser = useUser;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const UserContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function UserProvider({\n    children\n  }) {\n    const [userId, setUserId] = (0, _react.useState)(null);\n    const [isPremium, setIsPremium] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [hasCompletedOnboarding, setHasCompletedOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      initializeUser();\n    }, []);\n    const initializeUser = async () => {\n      try {\n        const storedUserId = await AsyncStorage.default.getItem('userId');\n        const onboardingComplete = await AsyncStorage.default.getItem('onboardingComplete');\n        if (storedUserId) {\n          setUserId(storedUserId);\n          setHasCompletedOnboarding(onboardingComplete === 'true');\n          await refreshUser(storedUserId);\n        } else {\n          await createUser();\n        }\n      } catch (error) {\n        console.error('Failed to initialize user:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const createUser = async () => {\n      try {\n        const response = await fetch(`${API_URL}/api/users`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        const data = await response.json();\n        await AsyncStorage.default.setItem('userId', data.userId);\n        setUserId(data.userId);\n        setIsPremium(data.isPremium);\n      } catch (error) {\n        console.error('Failed to create user:', error);\n      }\n    };\n    const refreshUser = async id => {\n      const targetId = id || userId;\n      if (!targetId) return;\n      try {\n        const response = await fetch(`${API_URL}/api/users/${targetId}`);\n        const data = await response.json();\n        setIsPremium(data.isPremium || false);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    const completeOnboarding = async () => {\n      await AsyncStorage.default.setItem('onboardingComplete', 'true');\n      setHasCompletedOnboarding(true);\n    };\n    const setPremium = async premium => {\n      if (!userId) return;\n      try {\n        await fetch(`${API_URL}/api/users/${userId}/premium?is_premium=${premium}`, {\n          method: 'PATCH'\n        });\n        setIsPremium(premium);\n      } catch (error) {\n        console.error('Failed to update premium status:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(UserContext.Provider, {\n      value: {\n        userId,\n        isPremium,\n        isLoading,\n        hasCompletedOnboarding,\n        createUser,\n        completeOnboarding,\n        setPremium,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this);\n  }\n  function useUser() {\n    const context = (0, _react.useContext)(UserContext);\n    if (!context) {\n      throw new Error('useUser must be used within UserProvider');\n    }\n    return context;\n  }\n});","lineCount":115,"map":[[13,2,20,0,"exports"],[13,9,20,0],[13,10,20,0,"UserProvider"],[13,22,20,0],[13,25,20,0,"UserProvider"],[13,37,20,0],[14,2,114,0,"exports"],[14,9,114,0],[14,10,114,0,"useUser"],[14,17,114,0],[14,20,114,0,"useUser"],[14,27,114,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactJsxDevRuntime"],[18,25,2,69],[18,28,2,69,"require"],[18,35,2,69],[18,36,2,69,"_dependencyMap"],[18,50,2,69],[19,2,5,0],[19,8,5,6,"API_URL"],[19,15,5,13],[19,18,5,16,"process"],[19,25,5,23],[19,26,5,24,"env"],[19,29,5,27],[19,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[19,53,5,51],[20,2,18,0],[20,8,18,6,"UserContext"],[20,19,18,17],[20,35,18,20],[20,39,18,20,"createContext"],[20,45,18,33],[20,46,18,33,"createContext"],[20,59,18,33],[20,61,18,63,"undefined"],[20,70,18,72],[20,71,18,73],[21,2,20,7],[21,11,20,16,"UserProvider"],[21,23,20,28,"UserProvider"],[21,24,20,29],[22,4,20,31,"children"],[23,2,20,71],[23,3,20,72],[23,5,20,74],[24,4,21,2],[24,10,21,8],[24,11,21,9,"userId"],[24,17,21,15],[24,19,21,17,"setUserId"],[24,28,21,26],[24,29,21,27],[24,32,21,30],[24,36,21,30,"useState"],[24,42,21,38],[24,43,21,38,"useState"],[24,51,21,38],[24,53,21,54],[24,57,21,58],[24,58,21,59],[25,4,22,2],[25,10,22,8],[25,11,22,9,"isPremium"],[25,20,22,18],[25,22,22,20,"setIsPremium"],[25,34,22,32],[25,35,22,33],[25,38,22,36],[25,42,22,36,"useState"],[25,48,22,44],[25,49,22,44,"useState"],[25,57,22,44],[25,59,22,45],[25,64,22,50],[25,65,22,51],[26,4,23,2],[26,10,23,8],[26,11,23,9,"isLoading"],[26,20,23,18],[26,22,23,20,"setIsLoading"],[26,34,23,32],[26,35,23,33],[26,38,23,36],[26,42,23,36,"useState"],[26,48,23,44],[26,49,23,44,"useState"],[26,57,23,44],[26,59,23,45],[26,63,23,49],[26,64,23,50],[27,4,24,2],[27,10,24,8],[27,11,24,9,"hasCompletedOnboarding"],[27,33,24,31],[27,35,24,33,"setHasCompletedOnboarding"],[27,60,24,58],[27,61,24,59],[27,64,24,62],[27,68,24,62,"useState"],[27,74,24,70],[27,75,24,70,"useState"],[27,83,24,70],[27,85,24,71],[27,90,24,76],[27,91,24,77],[28,4,26,2],[28,8,26,2,"useEffect"],[28,14,26,11],[28,15,26,11,"useEffect"],[28,24,26,11],[28,26,26,12],[28,32,26,18],[29,6,27,4,"initializeUser"],[29,20,27,18],[29,21,27,19],[29,22,27,20],[30,4,28,2],[30,5,28,3],[30,7,28,5],[30,9,28,7],[30,10,28,8],[31,4,30,2],[31,10,30,8,"initializeUser"],[31,24,30,22],[31,27,30,25],[31,33,30,25,"initializeUser"],[31,34,30,25],[31,39,30,37],[32,6,31,4],[32,10,31,8],[33,8,32,6],[33,14,32,12,"storedUserId"],[33,26,32,24],[33,29,32,27],[33,35,32,33,"AsyncStorage"],[33,47,32,45],[33,48,32,45,"default"],[33,55,32,45],[33,56,32,46,"getItem"],[33,63,32,53],[33,64,32,54],[33,72,32,62],[33,73,32,63],[34,8,33,6],[34,14,33,12,"onboardingComplete"],[34,32,33,30],[34,35,33,33],[34,41,33,39,"AsyncStorage"],[34,53,33,51],[34,54,33,51,"default"],[34,61,33,51],[34,62,33,52,"getItem"],[34,69,33,59],[34,70,33,60],[34,90,33,80],[34,91,33,81],[35,8,35,6],[35,12,35,10,"storedUserId"],[35,24,35,22],[35,26,35,24],[36,10,36,8,"setUserId"],[36,19,36,17],[36,20,36,18,"storedUserId"],[36,32,36,30],[36,33,36,31],[37,10,37,8,"setHasCompletedOnboarding"],[37,35,37,33],[37,36,37,34,"onboardingComplete"],[37,54,37,52],[37,59,37,57],[37,65,37,63],[37,66,37,64],[38,10,38,8],[38,16,38,14,"refreshUser"],[38,27,38,25],[38,28,38,26,"storedUserId"],[38,40,38,38],[38,41,38,39],[39,8,39,6],[39,9,39,7],[39,15,39,13],[40,10,40,8],[40,16,40,14,"createUser"],[40,26,40,24],[40,27,40,25],[40,28,40,26],[41,8,41,6],[42,6,42,4],[42,7,42,5],[42,8,42,6],[42,15,42,13,"error"],[42,20,42,18],[42,22,42,20],[43,8,43,6,"console"],[43,15,43,13],[43,16,43,14,"error"],[43,21,43,19],[43,22,43,20],[43,50,43,48],[43,52,43,50,"error"],[43,57,43,55],[43,58,43,56],[44,6,44,4],[44,7,44,5],[44,16,44,14],[45,8,45,6,"setIsLoading"],[45,20,45,18],[45,21,45,19],[45,26,45,24],[45,27,45,25],[46,6,46,4],[47,4,47,2],[47,5,47,3],[48,4,49,2],[48,10,49,8,"createUser"],[48,20,49,18],[48,23,49,21],[48,29,49,21,"createUser"],[48,30,49,21],[48,35,49,33],[49,6,50,4],[49,10,50,8],[50,8,51,6],[50,14,51,12,"response"],[50,22,51,20],[50,25,51,23],[50,31,51,29,"fetch"],[50,36,51,34],[50,37,51,35],[50,40,51,38,"API_URL"],[50,47,51,45],[50,59,51,57],[50,61,51,59],[51,10,52,8,"method"],[51,16,52,14],[51,18,52,16],[51,24,52,22],[52,10,53,8,"headers"],[52,17,53,15],[52,19,53,17],[53,12,53,19],[53,26,53,33],[53,28,53,35],[54,10,53,54],[55,8,54,6],[55,9,54,7],[55,10,54,8],[56,8,56,6],[56,14,56,12,"data"],[56,18,56,16],[56,21,56,19],[56,27,56,25,"response"],[56,35,56,33],[56,36,56,34,"json"],[56,40,56,38],[56,41,56,39],[56,42,56,40],[57,8,57,6],[57,14,57,12,"AsyncStorage"],[57,26,57,24],[57,27,57,24,"default"],[57,34,57,24],[57,35,57,25,"setItem"],[57,42,57,32],[57,43,57,33],[57,51,57,41],[57,53,57,43,"data"],[57,57,57,47],[57,58,57,48,"userId"],[57,64,57,54],[57,65,57,55],[58,8,58,6,"setUserId"],[58,17,58,15],[58,18,58,16,"data"],[58,22,58,20],[58,23,58,21,"userId"],[58,29,58,27],[58,30,58,28],[59,8,59,6,"setIsPremium"],[59,20,59,18],[59,21,59,19,"data"],[59,25,59,23],[59,26,59,24,"isPremium"],[59,35,59,33],[59,36,59,34],[60,6,60,4],[60,7,60,5],[60,8,60,6],[60,15,60,13,"error"],[60,20,60,18],[60,22,60,20],[61,8,61,6,"console"],[61,15,61,13],[61,16,61,14,"error"],[61,21,61,19],[61,22,61,20],[61,46,61,44],[61,48,61,46,"error"],[61,53,61,51],[61,54,61,52],[62,6,62,4],[63,4,63,2],[63,5,63,3],[64,4,65,2],[64,10,65,8,"refreshUser"],[64,21,65,19],[64,24,65,22],[64,30,65,29,"id"],[64,32,65,40],[64,36,65,45],[65,6,66,4],[65,12,66,10,"targetId"],[65,20,66,18],[65,23,66,21,"id"],[65,25,66,23],[65,29,66,27,"userId"],[65,35,66,33],[66,6,67,4],[66,10,67,8],[66,11,67,9,"targetId"],[66,19,67,17],[66,21,67,19],[67,6,69,4],[67,10,69,8],[68,8,70,6],[68,14,70,12,"response"],[68,22,70,20],[68,25,70,23],[68,31,70,29,"fetch"],[68,36,70,34],[68,37,70,35],[68,40,70,38,"API_URL"],[68,47,70,45],[68,61,70,59,"targetId"],[68,69,70,67],[68,71,70,69],[68,72,70,70],[69,8,71,6],[69,14,71,12,"data"],[69,18,71,16],[69,21,71,19],[69,27,71,25,"response"],[69,35,71,33],[69,36,71,34,"json"],[69,40,71,38],[69,41,71,39],[69,42,71,40],[70,8,72,6,"setIsPremium"],[70,20,72,18],[70,21,72,19,"data"],[70,25,72,23],[70,26,72,24,"isPremium"],[70,35,72,33],[70,39,72,37],[70,44,72,42],[70,45,72,43],[71,6,73,4],[71,7,73,5],[71,8,73,6],[71,15,73,13,"error"],[71,20,73,18],[71,22,73,20],[72,8,74,6,"console"],[72,15,74,13],[72,16,74,14,"error"],[72,21,74,19],[72,22,74,20],[72,47,74,45],[72,49,74,47,"error"],[72,54,74,52],[72,55,74,53],[73,6,75,4],[74,4,76,2],[74,5,76,3],[75,4,78,2],[75,10,78,8,"completeOnboarding"],[75,28,78,26],[75,31,78,29],[75,37,78,29,"completeOnboarding"],[75,38,78,29],[75,43,78,41],[76,6,79,4],[76,12,79,10,"AsyncStorage"],[76,24,79,22],[76,25,79,22,"default"],[76,32,79,22],[76,33,79,23,"setItem"],[76,40,79,30],[76,41,79,31],[76,61,79,51],[76,63,79,53],[76,69,79,59],[76,70,79,60],[77,6,80,4,"setHasCompletedOnboarding"],[77,31,80,29],[77,32,80,30],[77,36,80,34],[77,37,80,35],[78,4,81,2],[78,5,81,3],[79,4,83,2],[79,10,83,8,"setPremium"],[79,20,83,18],[79,23,83,21],[79,29,83,28,"premium"],[79,36,83,44],[79,40,83,49],[80,6,84,4],[80,10,84,8],[80,11,84,9,"userId"],[80,17,84,15],[80,19,84,17],[81,6,86,4],[81,10,86,8],[82,8,87,6],[82,14,87,12,"fetch"],[82,19,87,17],[82,20,87,18],[82,23,87,21,"API_URL"],[82,30,87,28],[82,44,87,42,"userId"],[82,50,87,48],[82,73,87,71,"premium"],[82,80,87,78],[82,82,87,80],[82,84,87,82],[83,10,88,8,"method"],[83,16,88,14],[83,18,88,16],[84,8,89,6],[84,9,89,7],[84,10,89,8],[85,8,90,6,"setIsPremium"],[85,20,90,18],[85,21,90,19,"premium"],[85,28,90,26],[85,29,90,27],[86,6,91,4],[86,7,91,5],[86,8,91,6],[86,15,91,13,"error"],[86,20,91,18],[86,22,91,20],[87,8,92,6,"console"],[87,15,92,13],[87,16,92,14,"error"],[87,21,92,19],[87,22,92,20],[87,56,92,54],[87,58,92,56,"error"],[87,63,92,61],[87,64,92,62],[88,6,93,4],[89,4,94,2],[89,5,94,3],[90,4,96,2],[90,24,97,4],[90,28,97,4,"_reactJsxDevRuntime"],[90,47,97,4],[90,48,97,4,"jsxDEV"],[90,54,97,4],[90,56,97,5,"UserContext"],[90,67,97,16],[90,68,97,17,"Provider"],[90,76,97,25],[91,6,98,6,"value"],[91,11,98,11],[91,13,98,13],[92,8,99,8,"userId"],[92,14,99,14],[93,8,100,8,"isPremium"],[93,17,100,17],[94,8,101,8,"isLoading"],[94,17,101,17],[95,8,102,8,"hasCompletedOnboarding"],[95,30,102,30],[96,8,103,8,"createUser"],[96,18,103,18],[97,8,104,8,"completeOnboarding"],[97,26,104,26],[98,8,105,8,"setPremium"],[98,18,105,18],[99,8,106,8,"refreshUser"],[100,6,107,6],[100,7,107,8],[101,6,107,8,"children"],[101,14,107,8],[101,16,109,7,"children"],[102,4,109,15],[103,6,109,15,"fileName"],[103,14,109,15],[103,16,109,15,"_jsxFileName"],[103,28,109,15],[104,6,109,15,"lineNumber"],[104,16,109,15],[105,6,109,15,"columnNumber"],[105,18,109,15],[106,4,109,15],[106,11,110,26],[106,12,110,27],[107,2,112,0],[108,2,114,7],[108,11,114,16,"useUser"],[108,18,114,23,"useUser"],[108,19,114,23],[108,21,114,26],[109,4,115,2],[109,10,115,8,"context"],[109,17,115,15],[109,20,115,18],[109,24,115,18,"useContext"],[109,30,115,28],[109,31,115,28,"useContext"],[109,41,115,28],[109,43,115,29,"UserContext"],[109,54,115,40],[109,55,115,41],[110,4,116,2],[110,8,116,6],[110,9,116,7,"context"],[110,16,116,14],[110,18,116,16],[111,6,117,4],[111,12,117,10],[111,16,117,14,"Error"],[111,21,117,19],[111,22,117,20],[111,64,117,62],[111,65,117,63],[112,4,118,2],[113,4,119,2],[113,11,119,9,"context"],[113,18,119,16],[114,2,120,0],[115,0,120,1],[115,3]],"functionMap":{"names":["<global>","UserProvider","useEffect$argument_0","initializeUser","createUser","refreshUser","completeOnboarding","setPremium","useUser"],"mappings":"AAA;OCmB;YCM;GDE;yBEE;GFiB;qBGE;GHc;sBIE;GJW;6BKE;GLG;qBME;GNW;CDkB;OQE"},"hasCjsExports":false},"type":"js/module"}]}